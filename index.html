<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oria - AI Chat Assistant</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
	<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <style>
        /* XQS 4S Detailed Popup Styles */
        .xqs-detail-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1001;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .xqs-detail-popup.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        .xqs-detail-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        
        .xqs-detail-content {
            position: relative;
            background-color: var(--primary-color);
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            border-radius: 20px 20px 0 0;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            overscroll-behavior: contain;
            -webkit-overflow-scrolling: touch;
            /* Hide scrollbar */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }
        
        /* Hide scrollbar for Chrome, Safari and Opera */
        .xqs-detail-content::-webkit-scrollbar {
            display: none;
            width: 0;
            height: 0;
        }
        
        .xqs-detail-popup.active .xqs-detail-content {
            transform: translateY(0);
        }
        
        .xqs-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 35px 30px 20px;
            border-bottom: 1px solid var(--border-color);
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            position: relative;
        }
        
        
        .xqs-detail-title-area {
            display: flex;
            flex-direction: column;
            padding-top: 15px;
        }
        
        .xqs-badge {
            display: inline-block;
            background-color: var(--accent-color);
            color: white;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            align-self: flex-start;
        }
        
        .xqs-detail-title {
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 5px 0;
            color: var(--text-color);
        }
        
        .xqs-detail-subtitle {
            font-size: 16px;
            color: var(--subheading-color);
            margin: 0;
        }
        
        .xqs-detail-close {
            background: none;
            border: none;
            color: white;
            font-size: 22px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease;
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1010;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .xqs-detail-close:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .xqs-detail-body {
            padding: 25px 30px 30px;
            padding-bottom: 50px;
        }
        
        .xqs-detail-section {
            margin-bottom: 30px;
        }
        
        .xqs-detail-section h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-color);
            display: flex;
            align-items: center;
        }
        
        .xqs-detail-section h3 i {
            color: var(--accent-color);
            margin-right: 10px;
        }
        
        .xqs-detail-section p {
            line-height: 1.6;
            color: var(--text-color);
            margin-bottom: 15px;
        }
        
        .xqs-detail-section ul {
            margin-left: 15px;
            margin-bottom: 15px;
        }
        
        .xqs-detail-section li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .xqs-industry-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .xqs-industry-item {
            background-color: var(--secondary-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .xqs-industry-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }
        
        .xqs-industry-item i {
            font-size: 28px;
            color: var(--accent-color);
            margin-bottom: 10px;
        }
        
        .xqs-industry-item h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-color);
        }
        
        .xqs-industry-item p {
            font-size: 14px;
            color: var(--subheading-color);
            margin: 0;
        }
        
        .xqs-detail-cta {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
            background-color: var(--secondary-color);
            padding: 25px;
            border-radius: 16px;
            text-align: center;
        }
        
        .xqs-notify-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            transition: background-color 0.2s ease, transform 0.2s ease;
        }
        
        .xqs-notify-btn.already-notified {
            background-color: var(--secondary-hover-color);
            cursor: default;
            color: var(--subheading-color);
        }
        
        .xqs-notify-btn:not(.already-notified):hover {
            background-color: var(--accent-hover-color);
            transform: translateY(-2px);
        }
        
        .xqs-notify-btn:not(.already-notified):active {
            transform: scale(0.98);
        }
        
        .xqs-notify-btn i {
            margin-right: 8px;
        }
        
        .xqs-detail-note {
            font-size: 14px;
            color: var(--subheading-color);
            margin: 0;
        }
        
        @media (max-width: 600px) {
            .xqs-detail-header {
                padding: 20px;
            }
            
            .xqs-detail-body {
                padding: 20px;
            }
            
            .xqs-detail-title {
                font-size: 22px;
            }
            
            .xqs-industry-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar for Chat History -->
        <div class="sidebar-container">
            <div class="sidebar-overlay"></div>
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>Chat History</h2>
                    <button class="sidebar-close" aria-label="Close sidebar">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

<div class="sidebar-new-chat" style="display: none;">
  <button class="new-chat-button-sidebar">
    <i class="fas fa-plus"></i>
      <span>New Chat</span>
</button>
</div>

                <div class="sidebar-content">
                    <div class="chat-history-list">
                        <!-- Chat history items will be added here by JavaScript -->
                    </div>
                </div>
                <!-- Add sidebar bottom icons -->
                <div class="sidebar-bottom">
                    <button class="explore-more-btn" aria-label="Explore More" onclick="location.href='explore.html'">
                        <i class="fas fa-compass"></i>
                        <span>Explore More</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <button class="menu-button" aria-label="Menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <div class="header-center">
                <button class="plus-button">Oria 4Q âœ¦</button>
            </div>
            <div class="header-right">
                <a href="settings.html" class="settings-button" aria-label="Settings">
                    <i class="fas fa-cog"></i>
                </a>
                <button class="new-chat-button" aria-label="New Chat">
                    <i class="fas fa-pen"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="chat-area" id="chat-area">
            <div class="chat-container">
                <!-- Messages will be added here by JavaScript -->
            </div>

            <!-- Scroll to bottom button -->
            <button class="scroll-bottom-btn" id="scrollBottomBtn">
                <i class="fas fa-chevron-down"></i>
            </button>

            <!-- Empty Chat State -->
            <div class="empty-chat-container">
                <div class="empty-chat-logo">
                    <!-- Logo will be dynamically inserted based on theme -->
                </div>
                <h1 class="empty-chat-title">Welcome to Oria</h1>
                <p class="empty-chat-subtitle">Smart. Fast. Purely for Knowledge.<br>Start a conversation or choose from the suggestions below.</p>
            </div>

            <!-- Loading Animation -->
            <div class="loading-container">
                <div class="oria-logo">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M24 4L36 12V28L24 36L12 28V12L24 4Z" stroke="#ddd" stroke-width="2" />
                        <path d="M24 4L36 12V28L24 36L12 28V12L24 4Z" stroke="#ccc" stroke-width="2" stroke-dasharray="60" stroke-dashoffset="180" class="pulse-path" />
                    </svg>
                </div>
            </div>
        </main>

        <!-- Bottom Input Section -->
        <div class="suggestion-buttons">
            <button class="suggestion-button">
                <span class="suggestion-title">Recommend sci-fi books</span>
                <span class="suggestion-subtitle">for a new reader</span>
            </button>
            <button class="suggestion-button">
                <span class="suggestion-title">What can Oria do</span>
                <span class="suggestion-subtitle">and how to get started</span>
            </button>
        </div>
        
        <!-- Input Tools Popup -->
        <div class="input-tools-popup" id="inputToolsPopup">
            <div class="popup-overlay"></div>
            <div class="popup-content">
                <div class="swipe-indicator">
                    <div class="swipe-bar"></div>
                </div>

                <div class="popup-header" style="display: none;">
                    <button class="popup-close" aria-label="Close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="popup-tools">
                    <button class="popup-tool-button" aria-label="Upload Image">
                        <i class="fas fa-image"></i>
                        <span>Image</span>
                    </button>
                    <button class="popup-tool-button" aria-label="Location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Location</span>
                    </button>
                </div>
                
                <!-- DeepX Mode Toggle -->
                <div class="deepx-mode-toggle">
                    <div class="deepx-toggle-label">
                        <span class="deepx-title">DeepX</span>
                        <span class="deepx-description">Enhanced research capabilities</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="deepxToggle">
                        <span class="slider round"></span>
                    </label>
                </div>
            </div>
        </div>
        
        <footer class="input-section">
            <div class="input-field-container">
                <textarea class="input-field" placeholder="Awaiting input..." rows="1"></textarea>
                <div class="command-suggestions">
                    <div class="command-suggestion-item" data-command="image">
                        <div class="command-suggestion-icon"><i class="fas fa-image"></i></div>
                        <div class="command-suggestion-text">/image</div>
                    </div>
                    <div class="command-suggestion-item" data-command="video">
                        <div class="command-suggestion-icon"><i class="fas fa-video"></i></div>
                        <div class="command-suggestion-text">/video</div>
                    </div>
                </div>
                <button class="input-action-button plus-icon" aria-label="Add content">
                    <i class="fas fa-plus" style="color: var(--text-color);"></i>
                </button>
                <button class="input-action-button send-icon" aria-label="Send message" style="display: none;">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div class="disclaimer-note">
                <i class="fas fa-exclamation-circle"></i> Built for accuracy. Not immune to error.
            </div>
        </footer>
        
        
    </div>

    <!-- Add Oria Version Popup -->
    <div class="version-popup" id="versionPopup">
        <div class="version-popup-overlay"></div>
        <div class="version-popup-content">
            <div class="version-popup-header">
                <h3 class="version-popup-title">Select Oria Version</h3>
                <button class="version-popup-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="version-options">
                <div class="version-option active" style="border: 2px solid var(--accent-color);">
                    <div class="version-badge badge-beta">BETA</div>
                    <div class="version-details">
                        <h4 class="version-name">Oria XSS 4Q</h4>
                        <p class="version-description">The latest version of Oria with enhanced knowledge processing. Features advanced reasoning and contextual understanding.</p>
                        <ul class="version-features">
                            <li><i class="fas fa-check"></i> Knowledge-focused AI</li>
                            <li><i class="fas fa-check"></i> Fast context processing</li>
                            <li><i class="fas fa-check"></i> Improved reasoning</li>
                        </ul>
                    </div>
                </div>
                
                <div class="version-option" id="xqs4sOption">
                    <div class="version-badge badge-coming-soon">COMING SOON</div>
                    <div class="version-details">
                        <h4 class="version-name">Oria XQS 4S</h4>
                        <p class="version-description">Coming in January 2026. Our most advanced AI assistant with revolutionary capabilities.</p>
                        <ul class="version-features">
                            <li><i class="fas fa-star"></i> Multimodal processing</li>
                            <li><i class="fas fa-star"></i> 1M token context</li>
                            <li><i class="fas fa-star"></i> Real-time processing</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- XQS 4S Detailed Popup -->
    <div class="xqs-detail-popup" id="xqsDetailPopup">
        <div class="xqs-detail-overlay"></div>
        <div class="xqs-detail-content">
            <div class="xqs-detail-header">
                <div class="xqs-detail-title-area">
                    <div class="xqs-badge">REVOLUTIONARY</div>
                    <h2 class="xqs-detail-title">Oria XQS 4S</h2>
                    <p class="xqs-detail-subtitle">The Future of AI Assistance</p>
                </div>
                <button class="xqs-detail-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="xqs-detail-body">
                <div class="xqs-detail-section">
                    <h3><i class="fas fa-clock"></i> Why the Long Wait?</h3>
                    <p>The development of Oria XQS 4S represents an unprecedented leap in AI technology. The extended timeline until January 2026 reflects our commitment to thorough testing and ethical development practices. Key factors include:</p>
                    <ul>
                        <li><strong>Hardware Limitations:</strong> Current processing infrastructure requires significant scaling to support the advanced capabilities.</li>
                        <li><strong>Training Requirements:</strong> The model needs extensive training on diverse datasets while ensuring factual accuracy and ethical alignment.</li>
                        <li><strong>Safety Testing:</strong> Rigorous testing protocols are being implemented to ensure responsible deployment.</li>
                    </ul>
                </div>
                
                <div class="xqs-detail-section">
                    <h3><i class="fas fa-rocket"></i> Industry-Changing Capabilities</h3>
                    <p>Oria XQS 4S is set to revolutionize the AI landscape with capabilities that fundamentally transform how businesses and individuals interact with technology:</p>
                    <ul>
                        <li><strong>True Multimodal Understanding:</strong> Seamless processing of text, images, audio, and video as a unified input, enabling comprehension that mirrors human perception.</li>
                        <li><strong>Contextual Memory:</strong> 1 million token context window allows for conversation retention and document analysis at unprecedented scale.</li>
                        <li><strong>Real-time Processing:</strong> Near-instantaneous responses regardless of input complexity, eliminating waiting time.</li>
                        <li><strong>Advanced Reasoning:</strong> Multi-step reasoning capabilities that approach expert-level problem solving across domains.</li>
                        <li><strong>Tool Integration:</strong> Native ability to interact with and control external tools and systems without pre-configuration.</li>
                    </ul>
                </div>
                
                <div class="xqs-detail-section">
                    <h3><i class="fas fa-industry"></i> Industry Impact</h3>
                    <p>The release of XQS 4S will transform numerous sectors:</p>
                    <div class="xqs-industry-grid">
                        <div class="xqs-industry-item">
                            <i class="fas fa-heartbeat"></i>
                            <h4>Healthcare</h4>
                            <p>Real-time diagnostics and treatment planning with comprehensive medical knowledge integration.</p>
                        </div>
                        <div class="xqs-industry-item">
                            <i class="fas fa-gavel"></i>
                            <h4>Legal</h4>
                            <p>Complete case analysis and precedent application with full regulatory compliance.</p>
                        </div>
                        <div class="xqs-industry-item">
                            <i class="fas fa-graduation-cap"></i>
                            <h4>Education</h4>
                            <p>Personalized learning pathways adapted to individual student needs and learning styles.</p>
                        </div>
                        <div class="xqs-industry-item">
                            <i class="fas fa-chart-line"></i>
                            <h4>Finance</h4>
                            <p>Complex market analysis and predictive modeling with multi-factor consideration.</p>
                        </div>
                    </div>
                </div>
                
                <div class="xqs-detail-cta">
                    <button class="xqs-notify-btn">
                        <i class="fas fa-bell"></i> Notify Me on Launch
                    </button>
                    <p class="xqs-detail-note">Join the 15,100+ professionals already on the waitlist.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Menu Popup -->
    <div class="share-popup" id="sharePopup">
        <div class="share-popup-overlay"></div>
        <div class="share-popup-content">
            <div class="share-popup-header">
                <h3 class="share-popup-title">Share This Message</h3>
                <button class="share-popup-close" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="share-options">
                <button class="share-option" data-platform="facebook">
                    <i class="fab fa-facebook-f"></i>
                    <span>Facebook</span>
                </button>
                <button class="share-option" data-platform="whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp</span>
                </button>
                <button class="share-option" data-platform="messenger">
                    <i class="fab fa-facebook-messenger"></i>
                    <span>Messenger</span>
                </button>
                <button class="share-option" data-platform="email">
                    <i class="fas fa-envelope"></i>
                    <span>Email</span>
                </button>
                <button class="share-option" data-platform="more">
                    <i class="fas fa-ellipsis-h"></i>
                    <span>More</span>
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Add event listener for plus button
        document.addEventListener('DOMContentLoaded', function() {
            const plusButton = document.querySelector('.plus-button');
            const versionPopup = document.getElementById('versionPopup');
            const versionPopupOverlay = document.querySelector('.version-popup-overlay');
            const versionPopupClose = document.querySelector('.version-popup-close');
            
            // Open version popup when Plus button is clicked
            if (plusButton) {
                plusButton.addEventListener('click', function() {
                    if (versionPopup) {
                        versionPopup.classList.add('active');
                        document.body.style.overflow = 'hidden';
                    }
                });
            }
            
            // Close version popup when overlay or close button is clicked
            if (versionPopupOverlay) {
                versionPopupOverlay.addEventListener('click', function() {
                    if (versionPopup) {
                        versionPopup.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                });
            }
            
            if (versionPopupClose) {
                versionPopupClose.addEventListener('click', function() {
                    if (versionPopup) {
                        versionPopup.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                });
            }

            // Network loading screen functionality
            const networkLoadingScreen = document.getElementById('network-loading-screen');
            const retryButton = document.querySelector('.network-retry-button');
            
            // Function to show loading screen
            function showNetworkLoading() {
                if (networkLoadingScreen) {
                    networkLoadingScreen.classList.remove('connected', 'error');
                    networkLoadingScreen.classList.add('visible');
                    document.body.style.overflow = 'hidden';
                    
                    // Update text
                    document.querySelector('.network-loading-text').textContent = 'Connecting to Oria';
                    document.querySelector('.network-loading-subtext').textContent = 'Establishing secure connection...';
                }
            }
            
            // Function to hide loading screen
            function hideNetworkLoading() {
                if (networkLoadingScreen) {
                    networkLoadingScreen.classList.add('connected');
                    
                    // Update text
                    document.querySelector('.network-loading-text').textContent = 'Connected';
                    document.querySelector('.network-loading-subtext').textContent = 'Secure connection established';
                    
                    // Hide after animation
                    setTimeout(() => {
                        networkLoadingScreen.classList.remove('visible');
                        document.body.style.overflow = '';
                    }, 500);
                }
            }
            
            // Function to show connection error
            function showNetworkError() {
                if (networkLoadingScreen) {
                    networkLoadingScreen.classList.remove('connected');
                    networkLoadingScreen.classList.add('error', 'visible');
                    document.body.style.overflow = 'hidden';
                    
                    // Update text
                    document.querySelector('.network-loading-text').textContent = 'Connection Failed';
                    document.querySelector('.network-loading-subtext').textContent = 'Please check your internet connection';
                }
            }
            
            // Function to reset the visit flag for testing or for fresh reload
            function resetNetworkCheck() {
                sessionStorage.removeItem('hasVisitedBefore');
                checkNetworkConnection();
            }
            
            // Check network connection on page load
            function checkNetworkConnection() {
                // Check if this is the first visit in this session
                const hasVisitedBefore = sessionStorage.getItem('hasVisitedBefore');
                
                if (!hasVisitedBefore) {
                    // First visit - show loading screen
                    showNetworkLoading();
                    
                    if (navigator.onLine) {
                        // Simulate network request delay
                        setTimeout(() => {
                            hideNetworkLoading();
                            // Mark as visited in this session
                            sessionStorage.setItem('hasVisitedBefore', 'true');
                        }, 600);
                    } else {
                        showNetworkError();
                    }
                } else {
                    // Not the first visit - skip loading screen unless offline
                    if (!navigator.onLine) {
                        showNetworkError();
                    }
                }
            }
            
            // Add event listener for retry button
            if (retryButton) {
                retryButton.addEventListener('click', function() {
                    resetNetworkCheck();
                });
            }
            
            // Add event listeners for online/offline events
            window.addEventListener('online', function() {
                // Only show transition if we were previously offline
                const wasOffline = networkLoadingScreen.classList.contains('error');
                if (wasOffline) {
                    showNetworkLoading();
                    setTimeout(() => {
                        hideNetworkLoading();
                    }, 600);
                }
            });
            
            window.addEventListener('offline', function() {
                showNetworkError();
            });
            
            // Check network connection on page load
            checkNetworkConnection();
        });

        // Message Actions Functionality
        (() => {
            // Share popup functionality
            const sharePopup = document.getElementById('sharePopup');
            const sharePopupOverlay = document.querySelector('.share-popup-overlay');
            const sharePopupClose = document.querySelector('.share-popup-close');
            const shareOptions = document.querySelectorAll('.share-option');
            let currentMessageContent = '';

            // Close share popup when overlay or close button is clicked
            if (sharePopupOverlay) {
                sharePopupOverlay.addEventListener('click', closeSharePopup);
            }
            
            if (sharePopupClose) {
                sharePopupClose.addEventListener('click', closeSharePopup);
            }

            function closeSharePopup() {
                if (sharePopup) {
                    sharePopup.classList.remove('active');
                    document.body.style.overflow = '';
                }
            }

            // Handle share option clicks
            if (shareOptions) {
                shareOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const platform = this.getAttribute('data-platform');
                        shareContent(platform, currentMessageContent);
                        closeSharePopup();
                    });
                });
            }

            // Function to handle sharing
            function shareContent(platform, content) {
                const encodedContent = encodeURIComponent(content);
                const websiteUrl = encodeURIComponent(window.location.href);
                
                switch(platform) {
                    case 'facebook':
                        window.open(`https://www.facebook.com/sharer/sharer.php?u=${websiteUrl}&quote=${encodedContent}`, '_blank');
                        break;
                    case 'whatsapp':
                        window.open(`https://wa.me/?text=${encodedContent}`, '_blank');
                        break;
                    case 'messenger':
                        window.open(`https://www.facebook.com/dialog/send?link=${websiteUrl}&app_id=123456789&redirect_uri=${websiteUrl}`, '_blank');
                        break;
                    case 'email':
                        window.location.href = `mailto:?subject=Oria AI Chat&body=${encodedContent}`;
                        break;
                    case 'more':
                        if (navigator.share) {
                            navigator.share({
                                title: 'Oria AI Chat',
                                text: content,
                                url: window.location.href
                            }).catch(err => {
                                console.error('Share failed:', err);
                            });
                        } else {
                            // Fallback if Web Share API is not available
                            copyToClipboard(content);
                            addSystemMessage('Link copied to clipboard!');
                        }
                        break;
                }
            }

            // Function to save messages
            function saveMessage(userMessage, oriaMessage) {
                // Get saved messages from localStorage or initialize empty array
                let savedMessages = JSON.parse(localStorage.getItem('savedMessages') || '[]');
                
                // Add new message pair
                savedMessages.push({
                    user: userMessage,
                    oria: oriaMessage,
                    timestamp: new Date().toISOString()
                });
                
                // Save to localStorage
                localStorage.setItem('savedMessages', JSON.stringify(savedMessages));
                
                // Show confirmation
                addSystemMessage('Message saved successfully!');
                
                // Create saved.html if it doesn't exist
                createSavedHtmlIfNeeded();
            }

            // Create saved.html file if it doesn't exist
            function createSavedHtmlIfNeeded() {
                // Check if saved.html exists by attempting to fetch it
                fetch('saved.html')
                    .then(response => {
                        // If not found, we'll handle it in the catch block
                        if (!response.ok) {
                            throw new Error('Saved page not found');
                        }
                    })
                    .catch(() => {
                        // Redirect to saved.html, which will be created if needed
                        window.location.href = 'saved.html';
                    });
            }

            // Function to copy to clipboard
            function copyToClipboard(text) {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text)
                        .then(() => {
                            addSystemMessage('Message copied to clipboard!');
                        })
                        .catch(err => {
                            console.error('Copy failed:', err);
                            addSystemMessage('Failed to copy message', true);
                        });
                } else {
                    // Fallback for browsers that don't support clipboard API
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    textarea.style.position = 'fixed';
                    document.body.appendChild(textarea);
                    textarea.focus();
                    textarea.select();
                    
                    try {
                        const successful = document.execCommand('copy');
                        if (successful) {
                            addSystemMessage('Message copied to clipboard!');
                        } else {
                            addSystemMessage('Failed to copy message', true);
                        }
                    } catch (err) {
                        console.error('Copy failed:', err);
                        addSystemMessage('Failed to copy message', true);
                    }
                    
                    document.body.removeChild(textarea);
                }
            }

            // Inject message action buttons into Oria messages
            function addMessageActionsToOriaMessages() {
                // Use MutationObserver to watch for new messages
                const chatContainer = document.querySelector('.chat-container');
                
                if (!chatContainer) return;
                
                const observer = new MutationObserver(mutations => {
                    mutations.forEach(mutation => {
                        if (mutation.type === 'childList') {
                            // Look for newly added Oria messages
                            mutation.addedNodes.forEach(node => {
                                if (node.nodeType === 1 && node.classList.contains('oria-message')) {
                                    const messageContent = node.querySelector('.message-content');
                                    
                                    if (messageContent && !messageContent.querySelector('.message-actions')) {
                                        // Create action buttons container
                                        const actionsContainer = document.createElement('div');
                                        actionsContainer.className = 'message-actions';
                                        
                                        // Share button
                                        const shareBtn = document.createElement('button');
                                        shareBtn.className = 'message-action-btn share-btn';
                                        shareBtn.innerHTML = '<i class="fas fa-share-alt"></i>';
                                        shareBtn.title = 'Share';
                                        shareBtn.addEventListener('click', function(e) {
                                            e.stopPropagation();
                                            // Get message content
                                            currentMessageContent = messageContent.textContent;
                                            // Open share popup
                                            sharePopup.classList.add('active');
                                        });
                                        
                                        // Copy button
                                        const copyBtn = document.createElement('button');
                                        copyBtn.className = 'message-action-btn copy-btn';
                                        copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
                                        copyBtn.title = 'Copy';
                                        copyBtn.addEventListener('click', function(e) {
                                            e.stopPropagation();
                                            copyToClipboard(messageContent.textContent);
                                        });
                                        
                                        // Save button
                                        const saveBtn = document.createElement('button');
                                        saveBtn.className = 'message-action-btn save-btn';
                                        saveBtn.innerHTML = '<i class="fas fa-bookmark"></i>';
                                        saveBtn.title = 'Save';
                                        saveBtn.addEventListener('click', function(e) {
                                            e.stopPropagation();
                                            // Find the nearest user message
                                            let userMessage = '';
                                            let currentElement = node.previousElementSibling;
                                            
                                            while (currentElement) {
                                                if (currentElement.classList.contains('user-message')) {
                                                    const userMessageContent = currentElement.querySelector('.message-content');
                                                    if (userMessageContent) {
                                                        userMessage = userMessageContent.textContent;
                                                    }
                                                    break;
                                                }
                                                currentElement = currentElement.previousElementSibling;
                                            }
                                            
                                            // Save the message pair
                                            saveMessage(userMessage, messageContent.textContent);
                                        });
                                        
                                        // Add buttons to container
                                        actionsContainer.appendChild(shareBtn);
                                        actionsContainer.appendChild(copyBtn);
                                        actionsContainer.appendChild(saveBtn);
                                        
                                        // Add container to message
                                        messageContent.appendChild(actionsContainer);
                                    }
                                }
                            });
                        }
                    });
                });
                
                observer.observe(chatContainer, { childList: true });
                
                // Process existing Oria messages
                document.querySelectorAll('.oria-message').forEach(message => {
                    const messageContent = message.querySelector('.message-content');
                    
                    if (messageContent && !messageContent.querySelector('.message-actions')) {
                        // Create action buttons container
                        const actionsContainer = document.createElement('div');
                        actionsContainer.className = 'message-actions';
                        
                        // Share button
                        const shareBtn = document.createElement('button');
                        shareBtn.className = 'message-action-btn share-btn';
                        shareBtn.innerHTML = '<i class="fas fa-share-alt"></i>';
                        shareBtn.title = 'Share';
                        shareBtn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            // Get message content
                            currentMessageContent = messageContent.textContent;
                            // Open share popup
                            sharePopup.classList.add('active');
                        });
                        
                        // Copy button
                        const copyBtn = document.createElement('button');
                        copyBtn.className = 'message-action-btn copy-btn';
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
                        copyBtn.title = 'Copy';
                        copyBtn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            copyToClipboard(messageContent.textContent);
                        });
                        
                        // Save button
                        const saveBtn = document.createElement('button');
                        saveBtn.className = 'message-action-btn save-btn';
                        saveBtn.innerHTML = '<i class="fas fa-bookmark"></i>';
                        saveBtn.title = 'Save';
                        saveBtn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            // Find the nearest user message
                            let userMessage = '';
                            let currentElement = message.previousElementSibling;
                            
                            while (currentElement) {
                                if (currentElement.classList.contains('user-message')) {
                                    const userMessageContent = currentElement.querySelector('.message-content');
                                    if (userMessageContent) {
                                        userMessage = userMessageContent.textContent;
                                    }
                                    break;
                                }
                                currentElement = currentElement.previousElementSibling;
                            }
                            
                            // Save the message pair
                            saveMessage(userMessage, messageContent.textContent);
                        });
                        
                        // Add buttons to container
                        actionsContainer.appendChild(shareBtn);
                        actionsContainer.appendChild(copyBtn);
                        actionsContainer.appendChild(saveBtn);
                        
                        // Add container to message
                        messageContent.appendChild(actionsContainer);
                    }
                });
            }

            // Initialize when DOM is loaded
            document.addEventListener('DOMContentLoaded', addMessageActionsToOriaMessages);
        })();

        // Scroll to bottom functionality
        (() => {
            const scrollBtn = document.getElementById('scrollBottomBtn');
            const chatArea = document.getElementById('chat-area');

            if (scrollBtn && chatArea) {
                scrollBtn.addEventListener('click', function() {
                    chatArea.scrollTo({
                        top: chatArea.scrollHeight,
                        behavior: 'smooth'
                    });
                    scrollBtn.classList.add('clicked');
                    scrollBtn.style.transform = 'scale(0.8) translateY(20px)';
                    scrollBtn.style.opacity = '0.5';
                });
            }
        })();

        // XQS 4S detailed popup functionality
        const xqs4sOption = document.getElementById('xqs4sOption');
        const xqsDetailPopup = document.getElementById('xqsDetailPopup');
        const xqsDetailOverlay = document.querySelector('.xqs-detail-overlay');
        const xqsDetailClose = document.querySelector('.xqs-detail-close');
        const xqsNotifyBtn = document.querySelector('.xqs-notify-btn');
        
        // Check if user has already been notified
        if (xqsNotifyBtn) {
            const isAlreadyNotified = localStorage.getItem('xqs4sNotified') === 'true';
            if (isAlreadyNotified) {
                xqsNotifyBtn.classList.add('already-notified');
                xqsNotifyBtn.innerHTML = '<i class="fas fa-check"></i> You\'re Already Notified';
            }
        }
        
        // Open XQS 4S detailed popup when the option is clicked
        if (xqs4sOption) {
            xqs4sOption.addEventListener('click', function(e) {
                e.stopPropagation(); // Prevent closing the version popup
                if (xqsDetailPopup) {
                    xqsDetailPopup.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            });
        }
        
        // Close XQS 4S detailed popup when overlay or close button is clicked
        if (xqsDetailOverlay) {
            xqsDetailOverlay.addEventListener('click', function() {
                closeXqsDetailPopup();
            });
        }
        
        if (xqsDetailClose) {
            xqsDetailClose.addEventListener('click', function() {
                closeXqsDetailPopup();
            });
        }
        
        // Handle the notify button click
        if (xqsNotifyBtn) {
            xqsNotifyBtn.addEventListener('click', function() {
                // Check if already notified
                const isAlreadyNotified = localStorage.getItem('xqs4sNotified') === 'true';
                if (!isAlreadyNotified) {
                    // Save to localStorage
                    localStorage.setItem('xqs4sNotified', 'true');
                    
                    // Update button appearance
                    xqsNotifyBtn.classList.add('already-notified');
                    xqsNotifyBtn.innerHTML = '<i class="fas fa-check"></i> You\'re Already Notified';
                    
                    closeXqsDetailPopup();
                    // Close the version popup too
                    if (versionPopup) {
                        versionPopup.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                    // Show notification
                    addSystemMessage('You will be notified when Oria XQS 4S launches!');
                }
            });
        }
        
        function closeXqsDetailPopup() {
            if (xqsDetailPopup) {
                xqsDetailPopup.classList.remove('active');
                document.body.style.overflow = '';
            }
            
            // Add touch gesture support for bottom sheet
            let startY = 0;
            let currentY = 0;
            let isDragging = false;
            
            if (xqsDetailPopup) {
                const content = xqsDetailPopup.querySelector('.xqs-detail-content');
                const header = content.querySelector('.xqs-detail-header');
                
                // Touch start event
                content.addEventListener('touchstart', function(e) {
                    const touch = e.touches[0];
                    startY = touch.clientY;
                    
                    // Check if the touch is on the header
                    const headerRect = header.getBoundingClientRect();
                    
                    // Allow dragging if touching the header area
                    if (touch.clientY >= headerRect.top && touch.clientY <= headerRect.bottom) {
                        isDragging = true;
                        content.style.transition = 'none';
                    }
                });
                
                // Touch move event
                content.addEventListener('touchmove', function(e) {
                    if (!isDragging) return;
                    
                    const touch = e.touches[0];
                    currentY = touch.clientY;
                    const deltaY = currentY - startY;
                    
                    // Only allow dragging downward
                    if (deltaY > 0) {
                        content.style.transform = `translateY(${deltaY}px)`;
                        e.preventDefault();
                    }
                });
                
                // Touch end event
                content.addEventListener('touchend', function() {
                    if (!isDragging) return;
                    
                    content.style.transition = 'transform 0.3s cubic-bezier(0.16, 1, 0.3, 1)';
                    
                    const deltaY = currentY - startY;
                    
                    // If dragged down more than 100px, close the popup
                    if (deltaY > 100) {
                        closeXqsDetailPopup();
                    } else {
                        // Otherwise snap back to original position
                        content.style.transform = 'translateY(0)';
                    }
                    
                    isDragging = false;
                });
            }
        }
    </script>
    
    <!-- Network Connection Loading Screen -->
    <div id="network-loading-screen" class="network-loading-screen">
        <div class="network-loading-content">
            <div class="network-loading-icon">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="40" class="network-circle-bg" />
                    <circle cx="50" cy="50" r="40" class="network-circle-path" />
                    <path d="M30,50 L45,60 L70,35" class="network-check-path" />
                </svg>
            </div>
            <h2 class="network-loading-text">Connecting to Oria</h2>
            <p class="network-loading-subtext">Establishing secure connection...</p>
            <div class="network-status">
                <div class="status-dot"></div>
                <div class="status-dot"></div>
                <div class="status-dot"></div>
            </div>
            <div class="network-retry-button">Retry Connection</div>
        </div>
    </div>
</body>
</html> 